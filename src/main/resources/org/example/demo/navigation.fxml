<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<?import javafx.geometry.Insets?>
<BorderPane xmlns="http://javafx.com/javafx/8"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="controllers.NavigationController"
            style="-fx-background-color: #f0f0f0;">


    <top>
        <HBox alignment="CENTER" style="-fx-background-color: #0c3b8c; -fx-padding: 20;">
            <!-- Ajout du bouton menu -->
            <Button text="☰" onAction="#toggleFloatingMenu"
                    style="-fx-text-fill: white; -fx-font-size: 24px; -fx-background-color: transparent;"/>

            <Label text="Tableau de Bord Administrateur"
                   style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: white;"/>


        </HBox>
    </top>

    <center>
        <StackPane fx:id="contentPane">
            <!-- Écran principal avec les boutons -->
            <GridPane fx:id="mainMenu" hgap="20" vgap="20" alignment="CENTER" style="-fx-background-color: #ffffff;">
                <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>


                <Button text="Gestion de Stock"
                        onAction="#openMainApp"
                        style="
                        -fx-font-size: 18px;
                        -fx-font-weight: bold;
                        -fx-min-width: 250px;
                        -fx-min-height: 80px;
                        -fx-background-color: #0c3b8c;
                        -fx-text-fill: white;
                        -fx-background-radius: 10;
                        -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 10, 0, 0, 0);
                    "/>

                <columnConstraints>
                    <ColumnConstraints halignment="CENTER" hgrow="ALWAYS"/>
                    <ColumnConstraints halignment="CENTER" hgrow="ALWAYS"/>
                </columnConstraints>
                <rowConstraints>
                    <RowConstraints vgrow="ALWAYS"/>
                    <RowConstraints vgrow="ALWAYS"/>
                    <RowConstraints vgrow="ALWAYS"/>
                </rowConstraints>
            </GridPane>

            <!-- Interface de gestion utilisateurs -->
            <BorderPane fx:id="userManagementPane" visible="false">
                <!-- Panneau latéral gauche pour les actions -->
                <left>
                    <!-- Bouton menu qui déclenchera le menu flottant -->
                    <VBox alignment="TOP_LEFT" spacing="10">
                        <!-- Bouton menu toujours visible -->

                        <!-- Menu flottant des actions -->
                        <VBox fx:id="actionMenu" style="
                                -fx-background-color: #ffffff;
                                -fx-padding: 15;
                                -fx-spacing: 10;
                                -fx-border-color: #0c3b8c;
                                -fx-border-width: 2;
                                -fx-border-radius: 5;
                                -fx-background-radius: 5;
                                -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.3), 10, 0, 0, 0);"
                              alignment="TOP_LEFT"
                              visible="false"
                              managed="false">

                            <Label text="Action user"
                                   style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: #0c3b8c; -fx-padding: 0 0 5 0;"/>


                            <Separator style="-fx-padding: 5 0;"/>

                            <TextField fx:id="searchField" promptText="Rechercher..."
                                       style="-fx-font-size: 14px; -fx-pref-width: 150px; -fx-padding: 8px; -fx-background-radius: 5;"/>
                        </VBox>
                    </VBox>

                </left>

                <!-- Tableau des utilisateurs -->
                <center>
                    <TableView fx:id="userTable" style="-fx-font-size: 14px; -fx-background-color: #ffffff;">
                        <columns>
                            <TableColumn fx:id="colId" text="ID" style="-fx-alignment: CENTER; -fx-font-weight: bold;"/>
                            <TableColumn fx:id="colNom" text="Nom" style="-fx-alignment: CENTER; -fx-font-weight: bold;"/>
                            <TableColumn fx:id="colPrenom" text="Prénom" style="-fx-alignment: CENTER; -fx-font-weight: bold;"/>
                            <TableColumn fx:id="colEmail" text="Email" style="-fx-alignment: CENTER; -fx-font-weight: bold;"/>
                            <TableColumn fx:id="colRole" text="Rôle" style="-fx-alignment: CENTER; -fx-font-weight: bold;"/>
                        </columns>
                        <style>
                            -fx-selection-bar: #3498db;
                            -fx-selection-bar-non-focused: #bdc3c7;
                        </style>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                        </columnResizePolicy>
                    </TableView>
                </center>

                <!-- Barre de statut -->
                <bottom>
                    <Label fx:id="statusLabel" style="-fx-font-size: 14px; -fx-padding: 10px; -fx-background-color: #34495e; -fx-text-fill: #ffffff; -fx-alignment: CENTER;"/>
                </bottom>
            </BorderPane>
        </StackPane> <!-- Cette balise de fermeture était manquante -->

    </center>
</BorderPane>
